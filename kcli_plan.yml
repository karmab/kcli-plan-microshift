microshift_profile:
 type: profile
 domain: {{ domain }}
 image: {{ image }}
 noname: {{ noname }}
 nets: [{{ network }}] 
 memory: {{ memory }}
 numcpus: {{ numcpus }}
 files:
 - 01_clients.sh
 - 02_crio.sh
 - 03_microshift.sh
{% if 'manifests'|find_manifests %}
 - manifests
{% endif %}
{% if pull_secret|exists %}
 - path: /root/auth.json
   origin: {{ pull_secret }}
{% endif %}
{% if kubeconfig_extra != None %}
 - path: /root/kubeconfig.extra
   origin: {{ kubeconfig_extra }}
 - acm.sh
{% endif %}
 scripts:
 - deploy.sh

{% for number in range(0, nodes) %}
{{ cluster }}-{{ number }}:
  profile: microshift_profile
{% endfor %}
